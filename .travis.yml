language: ruby
cache:
- bundler
rvm:
- 2.3.4
env:
  global:
  - CC_TEST_REPORTER_ID=23873bc8aee722ae9dcccaeeb18b97f0a830b50ba16d6d25ec0f67619902b5ef
before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
script:
- bundle exec rails db:create RAILS_ENV=test
- bundle exec rails db:migrate RAILS_ENV=test
- bundle exec rspec
after_script:
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
deploy:
  provider: heroku
  api_key:
    secure: TG6+CkVkq0Lzi39ajmlwD7ARwvpfdZJxyd+AGvjcQ70MGyT5p4ULOiV2C8JNrK9EGqktZ+DRUff8aj635XZB+duabv7779n5M1bIDA3IwC4U1vT6RwgsArXAu+8aVY2fiM2U0/0JB8TuwCJQVkUwOZoEMv7F5SmGO1d+zWvrlwpjl06voZ6mR2HjtH+JDNj7HFAiO1xjVN+16hsCtq6fG4tcgND1V4YuPlzIU/XTyVt+LkCPZC6I8I+rG9g8br9a4HoALrz0lKnTIU0KtVz1XFQbXiIg1w33wuLyaMRwJDJCH5ZTLorA4eKe6wjyg4QS1o1CNnb2glh0dZ9y5MUnVT22Uvxf7K8nt/1vnSaSMJlJoxipEbj6kHJ4pkMYi4NwO4jAg4//N/dh9sNJWadTruSkgKi/s+YjsAqXNsQrYrXqm5IxEoG6Ej8pVGoB4OPy0B2a588iA3QsEBIjDo+3G2PLyOJL0chD1q76AWPSXOPmFZ6VHMdXWU+i5a+k+XoCRTj1F9Hup5Yiz07p4CelQmqyi3MomIAGnbRig386j4gTFgD8LrNO9fGmzKF/6fNu/rC2fOBMGOKmL3t7tkG3ov3tuvHZReotFl2h/cW1earJwLFXob4o7K8B9FIvaf9nwA5niZElu0swhjxwJB9ecIln4/25zfumzsXYkdCcevw=
  app: silvertuna-staging
  on:
    repo: hyrumcarlile/devSR
notifications:
  email: false
